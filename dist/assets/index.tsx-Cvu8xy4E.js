import{r as g,g as bt,R as Pe,j as r,c as mt}from"./client-C3Mcq2Xm.js";import{D as ce,s as z,g as xt,o as vt}from"./storage-D6yWssag.js";const yt={},Re=e=>{let t;const o=new Set,a=(m,u)=>{const f=typeof m=="function"?m(t):m;if(!Object.is(f,t)){const x=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),o.forEach(v=>v(t,x))}},i=()=>t,p={setState:a,getState:i,getInitialState:()=>d,subscribe:m=>(o.add(m),()=>o.delete(m)),destroy:()=>{(yt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},d=t=e(a,i,p);return p},kt=e=>e?Re(e):Re;var Be={exports:{}},We={},He={exports:{}},Ve={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=g;function jt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:jt,St=H.useState,Et=H.useEffect,Nt=H.useLayoutEffect,Lt=H.useDebugValue;function Tt(e,t){var o=t(),a=St({inst:{value:o,getSnapshot:t}}),i=a[0].inst,n=a[1];return Nt(function(){i.value=o,i.getSnapshot=t,de(i)&&n({inst:i})},[e,o,t]),Et(function(){return de(i)&&n({inst:i}),e(function(){de(i)&&n({inst:i})})},[e]),Lt(o),o}function de(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Ct(e,o)}catch{return!0}}function Rt(e,t){return t()}var At=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rt:Tt;Ve.useSyncExternalStore=H.useSyncExternalStore!==void 0?H.useSyncExternalStore:At;He.exports=Ve;var Mt=He.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=g,Ft=Mt;function It(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:It,Dt=Ft.useSyncExternalStore,$t=ne.useRef,_t=ne.useEffect,Ot=ne.useMemo,Pt=ne.useDebugValue;We.useSyncExternalStoreWithSelector=function(e,t,o,a,i){var n=$t(null);if(n.current===null){var s={hasValue:!1,value:null};n.current=s}else s=n.current;n=Ot(function(){function p(x){if(!d){if(d=!0,m=x,x=a(x),i!==void 0&&s.hasValue){var v=s.value;if(i(v,x))return u=v}return u=x}if(v=u,zt(m,x))return v;var N=a(x);return i!==void 0&&i(v,N)?(m=x,v):(m=x,u=N)}var d=!1,m,u,f=o===void 0?null:o;return[function(){return p(t())},f===null?void 0:function(){return p(f())}]},[t,o,a,i]);var c=Dt(e,n[0],n[1]);return _t(function(){s.hasValue=!0,s.value=c},[c]),Pt(c),c};Be.exports=We;var Bt=Be.exports;const Wt=bt(Bt),Ye={},{useDebugValue:Ht}=Pe,{useSyncExternalStoreWithSelector:Vt}=Wt;let Ae=!1;const Yt=e=>e;function Ut(e,t=Yt,o){(Ye?"production":void 0)!=="production"&&o&&!Ae&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ae=!0);const a=Vt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,o);return Ht(a),a}const Me=e=>{(Ye?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?kt(e):e,o=(a,i)=>Ut(t,a,i);return Object.assign(o,t),o},Xt=e=>e?Me(e):Me,$=Xt((e,t)=>({settings:ce,isLoading:!0,initialize:async()=>{const o=await xt();e({settings:o,isLoading:!1}),vt(a=>{e({settings:a})})},updateSettings:o=>{const a={...t().settings,...o};e({settings:a}),z(a)},updateTypography:o=>{const a={...t().settings,typography:{...t().settings.typography,...o}};e({settings:a}),z(a)},updateVisualAids:o=>{const a=t().settings.visualAids,i={...a};o.readingRuler&&(i.readingRuler={...a.readingRuler,...o.readingRuler}),o.screenTint&&(i.screenTint={...a.screenTint,...o.screenTint}),o.focusMode&&(i.focusMode={...a.focusMode,...o.focusMode}),o.irisFocus&&(i.irisFocus={...a.irisFocus,...o.irisFocus}),o.handFocus&&(i.handFocus={...a.handFocus,...o.handFocus});const n={...t().settings,visualAids:i};e({settings:n}),z(n)},updateCognitive:o=>{const a=t().settings.cognitive,i={...a};o.bionicReading&&(i.bionicReading={...a.bionicReading,...o.bionicReading}),o.syllableSplitter&&(i.syllableSplitter={...a.syllableSplitter,...o.syllableSplitter});const n={...t().settings,cognitive:i};e({settings:n}),z(n)},updateAudio:o=>{const a={...t().settings,audio:{...t().settings.audio,...o}};e({settings:a}),z(a)},toggleExtension:()=>{const o={...t().settings,enabled:!t().settings.enabled};e({settings:o}),z(o)},resetToDefaults:()=>{e({settings:ce}),z(ce)}})),S=({label:e,value:t,min:o,max:a,step:i=1,unit:n="",onChange:s,disabled:c=!1})=>{const p=(t-o)/(a-o)*100;return r.jsxs("div",{className:`flex flex-col gap-2 ${c?"opacity-50":""}`,children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"text-sm font-medium text-white/90",children:e}),r.jsxs("span",{className:"text-sm text-primary-400 font-mono bg-surface-800/50 px-2 py-0.5 rounded",children:[t,n]})]}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"range",min:o,max:a,step:i,value:t,onChange:d=>s(parseFloat(d.target.value)),disabled:c,className:`w-full h-2 bg-surface-700 rounded-lg appearance-none cursor-pointer\r
                     [&::-webkit-slider-thumb]:appearance-none\r
                     [&::-webkit-slider-thumb]:w-4\r
                     [&::-webkit-slider-thumb]:h-4\r
                     [&::-webkit-slider-thumb]:rounded-full\r
                     [&::-webkit-slider-thumb]:bg-primary-500\r
                     [&::-webkit-slider-thumb]:shadow-lg\r
                     [&::-webkit-slider-thumb]:shadow-primary-500/30\r
                     [&::-webkit-slider-thumb]:cursor-pointer\r
                     [&::-webkit-slider-thumb]:transition-transform\r
                     [&::-webkit-slider-thumb]:hover:scale-110\r
                     disabled:cursor-not-allowed`,style:{background:`linear-gradient(to right, rgb(14 165 233) 0%, rgb(14 165 233) ${p}%, rgb(63 63 70) ${p}%, rgb(63 63 70) 100%)`}})})]})},I=({label:e,description:t,checked:o,onChange:a,disabled:i=!1})=>r.jsxs("div",{className:`flex items-center justify-between gap-3 p-3 rounded-lg bg-surface-800/30 
                  hover:bg-surface-800/50 transition-colors cursor-pointer
                  ${i?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!i&&a(!o),children:[r.jsxs("div",{className:"flex flex-col gap-0.5",children:[r.jsx("span",{className:"text-sm font-medium text-white/90",children:e}),t&&r.jsx("span",{className:"text-xs text-white/50",children:t})]}),r.jsx("button",{type:"button",role:"switch","aria-checked":o,disabled:i,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full
                    transition-colors duration-200 ease-in-out focus:outline-none
                    ${o?"bg-primary-500":"bg-surface-600"}
                    ${i?"cursor-not-allowed":""}`,onClick:n=>{n.stopPropagation(),i||a(!o)},children:r.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full
                      bg-white shadow-lg ring-0 transition duration-200 ease-in-out
                      ${o?"translate-x-5":"translate-x-0.5"}
                      mt-0.5`})})]}),Gt=["#fef3c7","#fecaca","#bbf7d0","#bfdbfe","#e9d5ff","#fed7aa","#f5e6d3","#ffedd5"],xe=({label:e,value:t,onChange:o,presets:a=Gt,disabled:i=!1})=>{const[n,s]=g.useState(!1),[c,p]=g.useState(t),d=g.useRef(null),m=g.useRef(null),u=g.useRef(null),f=g.useRef(null),[x,v]=g.useState(0);g.useEffect(()=>{p(t);const l=N(t);v(l)},[t]);const N=l=>{const h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);if(!h)return 0;const b=parseInt(h[1],16)/255,j=parseInt(h[2],16)/255,y=parseInt(h[3],16)/255,C=Math.max(b,j,y),M=Math.min(b,j,y);let L=0;if(C!==M){const le=C-M;switch(C){case b:L=((j-y)/le+(j<y?6:0))/6;break;case j:L=((y-b)/le+2)/6;break;case y:L=((b-j)/le+4)/6;break}}return Math.round(L*360)},Le=g.useCallback(()=>{const l=f.current;if(!l)return;const h=l.getContext("2d");if(!h)return;const b=l.width,j=l.height;for(let y=0;y<b;y++)for(let C=0;C<j;C++){const M=y/b*100,L=100-C/j*100;h.fillStyle=`hsl(${x}, ${M}%, ${L}%)`,h.fillRect(y,C,1,1)}},[x]);g.useEffect(()=>{n&&Le()},[n,x,Le]),g.useEffect(()=>{const l=h=>{const b=h.target;d.current&&!d.current.contains(b)&&s(!1)};if(n){const h=setTimeout(()=>{document.addEventListener("mousedown",l)},100);return()=>{clearTimeout(h),document.removeEventListener("mousedown",l)}}},[n]);const Te=(l,h,b)=>{h/=100,b/=100;const j=h*Math.min(b,1-b),y=C=>{const M=(C+l/30)%12,L=b-j*Math.max(Math.min(M-3,9-M,1),-1);return Math.round(255*L).toString(16).padStart(2,"0")};return`#${y(0)}${y(8)}${y(4)}`},ee=l=>{p(l),o(l)},ct=l=>{l.preventDefault(),l.stopPropagation();const h=f.current;if(!h)return;const b=h.getBoundingClientRect(),j=l.clientX-b.left,y=l.clientY-b.top,C=Math.max(0,Math.min(100,j/b.width*100)),M=Math.max(0,Math.min(100,100-y/b.height*100)),L=Te(x,C,M);ee(L)},dt=l=>{l.stopPropagation();const h=parseInt(l.target.value);v(h);const b=Te(h,100,50);ee(b)},ut=(l,h)=>{l.preventDefault(),l.stopPropagation(),ee(h),v(N(h))},pt=l=>{l.stopPropagation();const h=l.target.value;p(h),/^#[0-9A-Fa-f]{6}$/.test(h)&&(o(h),v(N(h)))},ht=l=>{l.preventDefault(),l.stopPropagation(),u.current&&u.current.click()},gt=l=>{l.stopPropagation();const h=l.target.value;ee(h),v(N(h))},ft=l=>{l.preventDefault(),l.stopPropagation(),i||s(!n)},wt=l=>{l.stopPropagation()};return r.jsxs("div",{ref:d,className:`relative ${i?"opacity-50":""}`,children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("label",{className:"text-sm font-medium text-white/90",children:e}),r.jsxs("button",{type:"button",disabled:i,onClick:ft,className:`flex items-center gap-2 px-2 py-1.5 rounded-lg bg-surface-800/50 \r
                     hover:bg-surface-700/50 transition-colors`,children:[r.jsx("div",{className:"w-6 h-6 rounded-md border-2 border-white/20 shadow-inner",style:{backgroundColor:c}}),r.jsx("span",{className:"text-xs font-mono text-white/60 uppercase",children:c})]})]}),n&&r.jsxs("div",{ref:m,className:`absolute right-0 top-full mt-2 p-3 rounded-xl bg-surface-800 \r
                        border border-white/10 shadow-xl z-50 animate-scale-in min-w-[220px]`,onClick:wt,onMouseDown:l=>l.stopPropagation(),children:[r.jsx("div",{className:"mb-3",children:r.jsx("canvas",{ref:f,width:200,height:120,onClick:ct,onMouseDown:l=>l.stopPropagation(),className:"w-full h-[120px] rounded-lg cursor-crosshair border border-white/10"})}),r.jsx("div",{className:"mb-3",children:r.jsx("input",{type:"range",min:"0",max:"360",value:x,onChange:dt,onMouseDown:l=>l.stopPropagation(),className:"w-full h-3 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"}})}),r.jsx("div",{className:"grid grid-cols-8 gap-1 mb-3",children:a.map(l=>r.jsx("button",{type:"button",onClick:h=>ut(h,l),onMouseDown:h=>h.stopPropagation(),className:`w-5 h-5 rounded border transition-all hover:scale-110 cursor-pointer
                           ${c.toLowerCase()===l.toLowerCase()?"border-primary-500 ring-1 ring-primary-500/50":"border-white/20"}`,style:{backgroundColor:l},title:l},l))}),r.jsxs("div",{className:"flex gap-2 pt-2 border-t border-white/10",children:[r.jsx("input",{ref:u,type:"color",value:c,onChange:gt,onMouseDown:l=>l.stopPropagation(),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0"}),r.jsx("input",{type:"text",value:c,onChange:pt,onClick:ht,onMouseDown:l=>l.stopPropagation(),placeholder:"#000000",className:`flex-1 px-2 py-1 text-xs font-mono bg-surface-700 rounded-lg \r
                         border border-white/10 text-white placeholder-white/30\r
                         focus:outline-none focus:border-primary-500 cursor-pointer`})]}),r.jsx("div",{className:"mt-3 pt-2 border-t border-white/10",children:r.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),s(!1)},className:`w-full py-2 rounded-lg bg-primary-600 hover:bg-primary-500 \r
                         text-white text-sm font-medium transition-colors`,children:"Done"})})]})]})},ie=({label:e,value:t,options:o,onChange:a,disabled:i=!1})=>r.jsxs("div",{className:`flex flex-col gap-2 ${i?"opacity-50":""}`,children:[r.jsx("label",{className:"text-sm font-medium text-white/90",children:e}),r.jsx("select",{value:t,onChange:n=>a(n.target.value),disabled:i,className:`w-full px-3 py-2 rounded-lg bg-surface-700/80 border border-white/10\r
                   text-white text-sm cursor-pointer\r
                   focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500/30\r
                   disabled:cursor-not-allowed appearance-none\r
                   bg-[url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E')]\r
                   bg-[length:8px] bg-[center_right_12px] bg-no-repeat`,children:o.map(n=>r.jsx("option",{value:n.value,className:"bg-surface-800",children:n.label},n.value))})]}),qt=[{value:"system-ui",label:"System Default"},{value:"OpenDyslexic",label:"OpenDyslexic"},{value:"Arial",label:"Arial"},{value:"Verdana",label:"Verdana"},{value:"Comic Sans MS",label:"Comic Sans"}],Jt=()=>{const{settings:e,updateTypography:t}=$(),{typography:o}=e;return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[r.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})}),r.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Typography"})]}),r.jsx(ie,{label:"Font Family",value:o.fontFamily,options:qt,onChange:a=>t({fontFamily:a})}),r.jsx(S,{label:"Line Height",value:o.lineHeight,min:1,max:3,step:.1,onChange:a=>t({lineHeight:a})}),r.jsx(S,{label:"Letter Spacing",value:o.letterSpacing,min:0,max:10,step:.5,unit:"px",onChange:a=>t({letterSpacing:a})}),r.jsx(S,{label:"Word Spacing",value:o.wordSpacing,min:0,max:20,step:1,unit:"px",onChange:a=>t({wordSpacing:a})}),r.jsx(I,{label:"Bold Text",description:"Make all text bold for better visibility",checked:o.fontWeight==="bold",onChange:a=>t({fontWeight:a?"bold":"normal"})})]})},ue=[{x:"10%",y:"10%"},{x:"50%",y:"10%"},{x:"90%",y:"10%"},{x:"10%",y:"50%"},{x:"50%",y:"50%"},{x:"90%",y:"50%"},{x:"10%",y:"90%"},{x:"50%",y:"90%"},{x:"90%",y:"90%"}],Kt=({onClose:e,onComplete:t})=>{const[o,a]=g.useState(0),[i,n]=g.useState(0),s=()=>{const p=i+1;p>=5?o<ue.length-1?(a(d=>d+1),n(0)):t():n(p)},c=ue[o];return r.jsxs("div",{className:"fixed inset-0 z-[2147483648] bg-black/90 flex flex-col items-center justify-center font-sans",children:[r.jsxs("div",{className:"absolute top-8 text-center text-white",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Eye Tracking Calibration"}),r.jsxs("p",{className:"text-white/70",children:["Look at the red dot and click it 5 times.",r.jsx("br",{}),"Keep your head still!"]}),r.jsxs("p",{className:"mt-4 text-sm text-white/50",children:["Point ",o+1," of ",ue.length]})]}),r.jsx("button",{onClick:e,className:"absolute top-8 right-8 text-white/50 hover:text-white",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("button",{onClick:s,style:{position:"absolute",left:c.x,top:c.y,transform:"translate(-50%, -50%)"},className:"group relative w-8 h-8",children:[r.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-full animate-ping opacity-75"}),r.jsx("div",{className:"relative w-8 h-8 bg-red-500 rounded-full border-2 border-white cursor-crosshair flex items-center justify-center text-xs font-bold text-white",children:5-i})]})]})};let E=null,Fe=!1;const Zt="lexilens-iris-overlay",Qt="LEXILENS_GAZE_DATA",Se="LEXILENS_CMD";function er(e){if(e.data.type===Qt&&E){const{x:t,y:o}=e.data.payload;typeof t=="number"&&typeof o=="number"&&(E.style.setProperty("--gaze-x",`${t}px`),E.style.setProperty("--gaze-y",`${o}px`))}}function tr(){Fe||(chrome.runtime.sendMessage({type:"INJECT_IRIS"}),window.addEventListener("message",er),Fe=!0)}function rr(e){const t=document.createElement("div");t.id=Zt,t.setAttribute("data-lexilens","iris-overlay");const o=window.innerWidth/2,a=window.innerHeight/2;return t.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 2147483646;
    pointer-events: none;
    
    /* Blur outside the focus area */
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    
    /* CSS Variables for dynamic positioning */
    --gaze-x: ${o}px;
    --gaze-y: ${a}px;
    --spotlight-radius: ${e.spotlightRadius}px;
    --spotlight-feather: 50px;
    
    /* Radial gradient mask - transparent in center, opaque outside */
    mask-image: radial-gradient(
      circle at var(--gaze-x) var(--gaze-y),
      transparent 0px,
      transparent var(--spotlight-radius),
      rgba(0,0,0,0.3) calc(var(--spotlight-radius) + var(--spotlight-feather)),
      rgba(0,0,0,1) calc(var(--spotlight-radius) + var(--spotlight-feather) + 100px)
    );
    -webkit-mask-image: radial-gradient(
      circle at var(--gaze-x) var(--gaze-y),
      transparent 0px,
      transparent var(--spotlight-radius),
      rgba(0,0,0,0.3) calc(var(--spotlight-radius) + var(--spotlight-feather)),
      rgba(0,0,0,1) calc(var(--spotlight-radius) + var(--spotlight-feather) + 100px)
    );
    
    /* Smooth transition for spotlight movement */
    transition: mask-image 0.1s ease-out, -webkit-mask-image 0.1s ease-out;
  `,t}function or(e){console.log("[LexiLens] Enabling Iris Focus"),tr(),E?E.style.display="block":(E=rr(e),document.documentElement.appendChild(E)),Ue(e),setTimeout(()=>{window.postMessage({type:Se,command:"START"},"*")},1500)}function Ue(e){E&&E.style.setProperty("--spotlight-radius",`${e.spotlightRadius}px`)}function Ie(){console.log("[LexiLens] Disabling Iris Focus"),E&&(E.style.display="none"),window.postMessage({type:Se,command:"STOP"},"*")}function ar(){window.postMessage({type:Se,command:"TOGGLE_VIDEO",value:!0},"*"),console.log("[LexiLens] Calibration started - look at the calibration points")}const nr=[{value:"none",label:"None"},{value:"sepia",label:"Sepia (Warm)"},{value:"blue-light",label:"Blue Light Filter"},{value:"custom",label:"Custom Color"}],ir=()=>{const{settings:e,updateVisualAids:t}=$(),{visualAids:o}=e,[a,i]=g.useState(!1);return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[r.jsxs("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),r.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Visual Aids"})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Reading Ruler",description:"A horizontal bar that follows your cursor",checked:o.readingRuler.enabled,onChange:n=>t({readingRuler:{enabled:n}})}),o.readingRuler.enabled&&r.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[r.jsx(S,{label:"Height",value:o.readingRuler.height,min:20,max:200,step:10,unit:"px",onChange:n=>t({readingRuler:{height:n}})}),r.jsx(S,{label:"Opacity",value:o.readingRuler.opacity,min:.1,max:1,step:.1,onChange:n=>t({readingRuler:{opacity:n}})}),r.jsx(xe,{label:"Color",value:o.readingRuler.color,onChange:n=>t({readingRuler:{color:n}})})]})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Screen Tint",description:"Color overlay to reduce eye strain",checked:o.screenTint.enabled,onChange:n=>t({screenTint:{enabled:n}})}),o.screenTint.enabled&&r.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[r.jsx(ie,{label:"Preset",value:o.screenTint.preset,options:nr,onChange:n=>t({screenTint:{preset:n}})}),o.screenTint.preset==="custom"&&r.jsx(xe,{label:"Custom Color",value:o.screenTint.customColor,onChange:n=>t({screenTint:{customColor:n}})}),r.jsx(S,{label:"Intensity",value:o.screenTint.intensity,min:10,max:80,step:5,unit:"%",onChange:n=>t({screenTint:{intensity:n}})})]})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Focus Mode",description:"Dims everything except the paragraph you're reading",checked:o.focusMode.enabled,onChange:n=>t({focusMode:{enabled:n}})}),o.focusMode.enabled&&r.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:r.jsx(S,{label:"Dim Amount",value:o.focusMode.dimOpacity,min:.3,max:.9,step:.1,onChange:n=>t({focusMode:{dimOpacity:n}})})})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Iris Focus",description:"Blur screen where you are NOT looking (Eye Tracking)",checked:o.irisFocus.enabled,onChange:n=>t({irisFocus:{enabled:n}})}),o.irisFocus.enabled&&r.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[r.jsx(S,{label:"Spotlight Radius",value:o.irisFocus.spotlightRadius,min:100,max:400,step:10,unit:"px",onChange:n=>t({irisFocus:{spotlightRadius:n}})}),r.jsxs("button",{onClick:()=>{i(!0),ar()},className:"w-full py-2 px-3 rounded-lg bg-accent-600/20 hover:bg-accent-600/30 text-accent-400 font-medium border border-accent-600/30 transition-colors flex items-center justify-center gap-2",children:[r.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Calibrate Eye Tracker"]})]})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Hand Focus",description:"Point with your finger to focus (Hand Tracking)",checked:o.handFocus.enabled,onChange:n=>t({handFocus:{enabled:n}})}),o.handFocus.enabled&&r.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[r.jsx(S,{label:"Spotlight Radius",value:o.handFocus.spotlightRadius,min:100,max:400,step:10,unit:"px",onChange:n=>t({handFocus:{spotlightRadius:n}})}),r.jsx(S,{label:"Blur Amount",value:o.handFocus.blurAmount,min:2,max:15,step:1,unit:"px",onChange:n=>t({handFocus:{blurAmount:n}})}),r.jsx("p",{className:"text-xs text-white/50 italic",children:"Point with your index finger to control the focus area"})]})]}),a&&r.jsx(Kt,{onClose:()=>i(!1),onComplete:()=>i(!1)})]})},sr=[{value:"Â·",label:"Middle Dot (Â·)"},{value:"-",label:"Hyphen (-)"},{value:" ",label:"Space"}],lr=()=>{const{settings:e,updateCognitive:t}=$(),{cognitive:o}=e;return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[r.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),r.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Reading Assistance"})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Bionic Reading",description:"Bolds the first part of words to guide your eye",checked:o.bionicReading.enabled,onChange:a=>t({bionicReading:{enabled:a}})}),o.bionicReading.enabled&&r.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[r.jsx(S,{label:"Bold Percentage",value:o.bionicReading.boldPercentage,min:30,max:70,step:5,unit:"%",onChange:a=>t({bionicReading:{boldPercentage:a}})}),r.jsxs("p",{className:"text-xs text-white/50 leading-relaxed",children:["Example: ",r.jsx("strong",{className:"text-white/90",children:"Thi"}),"s is ",r.jsx("strong",{className:"text-white/90",children:"ho"}),"w ",r.jsx("strong",{className:"text-white/90",children:"bio"}),"nic ",r.jsx("strong",{className:"text-white/90",children:"read"}),"ing ",r.jsx("strong",{className:"text-white/90",children:"wor"}),"ks"]})]})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-surface-800/30",children:[r.jsx(I,{label:"Syllable Splitter",description:"Splits words into syllables for easier reading",checked:o.syllableSplitter.enabled,onChange:a=>t({syllableSplitter:{enabled:a}})}),o.syllableSplitter.enabled&&r.jsxs("div",{className:"space-y-3 pt-2 pl-2 border-l-2 border-primary-500/30",children:[r.jsx(ie,{label:"Separator",value:o.syllableSplitter.separator,options:sr,onChange:a=>t({syllableSplitter:{separator:a}})}),r.jsxs("p",{className:"text-xs text-white/50 leading-relaxed",children:["Example: el",o.syllableSplitter.separator,"e",o.syllableSplitter.separator,"phant, beau",o.syllableSplitter.separator,"ti",o.syllableSplitter.separator,"ful"]})]})]}),r.jsx("div",{className:"p-3 rounded-xl bg-primary-500/10 border border-primary-500/20",children:r.jsxs("p",{className:"text-xs text-primary-300 leading-relaxed",children:["ðŸ’¡ ",r.jsx("strong",{children:"Tip:"})," These features work best on article and blog content. Some dynamic websites may have limited support."]})})]})};let X=null,_=!1,re=[];const Ee="lexilens-tts-highlight";let U=null;function Xe(){return X||(X=window.speechSynthesis),X}function cr(e){const t=Xe(),o=t.getVoices();if(o.length>0){e(o.filter(a=>a.lang.startsWith("en")));return}t.onvoiceschanged=()=>{e(t.getVoices().filter(a=>a.lang.startsWith("en")))}}function dr(e){U||(U=document.createElement("style"),U.id="lexilens-tts-styles",document.head.appendChild(U)),U.textContent=`
    .${Ee} {
      background-color: ${e} !important;
      border-radius: 2px;
      transition: background-color 0.1s ease;
    }
  `}function ve(){re.forEach(e=>{e.classList.remove(Ee)}),re=[]}function Ge(e,t,o){return new Promise((a,i)=>{const n=Xe();Q();const s=new SpeechSynthesisUtterance(e);if(s.rate=t.speed,s.pitch=1,s.volume=1,t.voiceURI){const p=n.getVoices().find(d=>d.voiceURI===t.voiceURI);p&&(s.voice=p)}_=!0,o&&t.highlightColor&&(dr(t.highlightColor),o.classList.add(Ee),re.push(o)),s.onend=()=>{_=!1,ve(),a()},s.onerror=c=>{_=!1,ve(),c.error!=="canceled"?i(new Error(c.error)):a()},n.speak(s)})}function Q(){X&&X.cancel(),_=!1,ve()}function ur(){return _}let O=null;function pr(e){O||(O=t=>{var n;const o=t.target;if(o.closest(".lexilens-widget"))return;const a=o.closest("p, h1, h2, h3, h4, h5, h6, li, span, div");if(!a)return;const i=(n=a.textContent)==null?void 0:n.trim();if(i){if(re.includes(a)&&_){Q();return}Ge(i,e,a)}},document.addEventListener("click",O))}function pe(){O&&(document.removeEventListener("click",O),O=null),Q()}const hr=()=>{const{settings:e,updateAudio:t}=$(),{audio:o}=e,[a,i]=g.useState([]),[n,s]=g.useState(!1);g.useEffect(()=>{cr(d=>{i(d),!o.voiceURI&&d.length>0&&t({voiceURI:d[0].voiceURI})})},[]),g.useEffect(()=>{const d=setInterval(()=>{s(ur())},100);return()=>clearInterval(d)},[]);const c=a.map(d=>({value:d.voiceURI,label:`${d.name} (${d.lang})`})),p=async()=>{if(n){Q();return}const d="LexiLens helps you read better by providing customizable tools for improved reading fluency.",m=new SpeechSynthesisUtterance(d);if(m.rate=o.speed,o.voiceURI){const u=a.find(f=>f.voiceURI===o.voiceURI);u&&(m.voice=u)}window.speechSynthesis.speak(m)};return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[r.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),r.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Text-to-Speech"})]}),r.jsx(I,{label:"Click to Read",description:"Click any text to hear it spoken aloud",checked:o.clickToRead,onChange:d=>t({clickToRead:d})}),r.jsx(ie,{label:"Voice",value:o.voiceURI,options:c,onChange:d=>t({voiceURI:d})}),r.jsx(S,{label:"Speed",value:o.speed,min:.5,max:2,step:.1,unit:"x",onChange:d=>t({speed:d})}),r.jsx(xe,{label:"Highlight Color",value:o.highlightColor,onChange:d=>t({highlightColor:d}),presets:["#fef08a","#a5f3fc","#c4b5fd","#fda4af","#86efac","#fed7aa"]}),r.jsx("button",{onClick:p,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
                    font-medium text-sm transition-all
                    ${n?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-primary-500/20 text-primary-400 hover:bg-primary-500/30"}`,children:n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"Stop"]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Test Voice"]})}),r.jsx("div",{className:"p-3 rounded-xl bg-primary-500/10 border border-primary-500/20",children:r.jsxs("p",{className:"text-xs text-primary-300 leading-relaxed",children:["ðŸ’¡ ",r.jsx("strong",{children:"Tip:"}),' Select text and right-click to read it aloud, or enable "Click to Read" to click any paragraph.']})})]})},gr=[{id:"typography",label:"Text",icon:r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})},{id:"visual",label:"Visual",icon:r.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})},{id:"cognitive",label:"Reading",icon:r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})},{id:"audio",label:"Audio",icon:r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}],fr=({onClose:e})=>{const{settings:t,toggleExtension:o,resetToDefaults:a}=$(),[i,n]=g.useState("typography"),s=()=>{switch(i){case"typography":return r.jsx(Jt,{});case"visual":return r.jsx(ir,{});case"cognitive":return r.jsx(lr,{});case"audio":return r.jsx(hr,{});default:return null}};return r.jsxs("div",{className:"w-[340px] max-h-[550px] flex flex-col rounded-2xl glass shadow-2xl overflow-hidden animate-scale-in",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-xl bg-gradient-to-br from-primary-400 to-accent-500 \r
                          flex items-center justify-center shadow-glow`,children:r.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-sm font-bold text-white",children:"LexiLens"}),r.jsx("p",{className:"text-xs text-white/50",children:"Reading Assistant"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:o,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all
                       ${t.enabled?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-surface-700 text-white/50 hover:bg-surface-600"}`,children:t.enabled?"ON":"OFF"}),r.jsx("button",{onClick:e,className:"p-1.5 rounded-lg text-white/50 hover:text-white hover:bg-white/10 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),r.jsx("div",{className:"flex p-2 gap-1 border-b border-white/10 bg-surface-900/30",children:gr.map(c=>r.jsxs("button",{onClick:()=>n(c.id),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-2 rounded-lg
                        text-xs font-medium transition-all
                        ${i===c.id?"bg-primary-500/20 text-primary-400":"text-white/50 hover:text-white/80 hover:bg-white/5"}`,children:[c.icon,r.jsx("span",{className:"hidden sm:inline",children:c.label})]},c.id))}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 lexilens-scrollbar",children:t.enabled?s():r.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-surface-800 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/70 font-medium",children:"LexiLens is disabled"}),r.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Click the ON button above to enable"})]})]})}),r.jsxs("div",{className:"flex items-center justify-between p-3 border-t border-white/10 bg-surface-900/30",children:[r.jsx("button",{onClick:a,className:"text-xs text-white/40 hover:text-white/60 transition-colors",children:"Reset to defaults"}),r.jsx("span",{className:"text-xs text-white/30",children:"v1.0.0"})]})]})},wr=({onClick:e,isOpen:t})=>{const{settings:o}=$();return r.jsxs("button",{onClick:e,className:`group relative w-14 h-14 rounded-2xl shadow-lg transition-all duration-300
                  flex items-center justify-center
                  ${t?"bg-surface-800 rotate-90 scale-90":"bg-gradient-to-br from-primary-500 to-accent-600 hover:scale-105 hover:shadow-glow-lg"}
                  ${!o.enabled&&!t?"opacity-60":""}`,"aria-label":t?"Close LexiLens panel":"Open LexiLens panel",children:[r.jsx("div",{className:`transition-transform duration-300 ${t?"rotate-45":""}`,children:t?r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):r.jsx("svg",{className:"w-7 h-7 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})}),!t&&r.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-surface-900
                      transition-colors duration-300
                      ${o.enabled?"bg-green-500":"bg-surface-600"}`}),!t&&r.jsxs("div",{className:`absolute right-full mr-3 px-3 py-1.5 rounded-lg bg-surface-800 \r
                        text-white text-sm font-medium whitespace-nowrap\r
                        opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\r
                        shadow-lg`,children:["LexiLens",r.jsx("div",{className:`absolute right-0 top-1/2 -translate-y-1/2 translate-x-full\r
                          border-8 border-transparent border-l-surface-800`})]}),!t&&r.jsx("div",{className:`absolute inset-0 rounded-2xl bg-white/10 opacity-0 \r
                        group-hover:opacity-100 group-active:opacity-20 transition-opacity`})]})},br=new Set(["the","is","at","which","on","and","a","an","in","to","of","for","with","by","as","it","that","this","are","was","were","be","have","has","had","do","does","did","but","or","so","if","when","where","how","why","who","what","all","any","some","no","not","can","could","will","would","should","may","might","must","my","your","his","her","its","our","their","he","she","they","we","i","you"]);function mr(e,t=.3){if(!e||e.length<50)return e;const o=/[^.!?]+[.!?]+/g,a=e.match(o);if(!a||a.length<=1)return e;const i=a.map(u=>u.trim()),n={};(e.toLowerCase().match(/\b\w+\b/g)||[]).forEach(u=>{!br.has(u)&&u.length>2&&(n[u]=(n[u]||0)+1)});const c=Math.max(...Object.values(n),1);Object.keys(n).forEach(u=>{n[u]=n[u]/c});const p=i.map((u,f)=>{const x=u.toLowerCase().match(/\b\w+\b/g)||[];let v=0;return x.forEach(N=>{n[N]&&(v+=n[N])}),f===0&&(v*=1.2),f===i.length-1&&(v*=1.1),x.length<5&&(v*=.5),{text:u,score:v/(x.length||1),index:f}}),d=Math.max(1,Math.ceil(i.length*t));return[...p].sort((u,f)=>f.score-u.score).slice(0,d).sort((u,f)=>u.index-f.index).map(u=>u.text).join(" ")}const xr=({originalText:e,onClose:t})=>{const[o]=g.useState(()=>mr(e)),[a,i]=g.useState(!1),[n,s]=g.useState(!1),c=()=>{navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)},p=async()=>{n?(Q(),s(!1)):(s(!0),await Ge(o,{speed:1,voiceURI:"",highlightColor:"#fef08a"},void 0),s(!1))};return r.jsxs("div",{className:"fixed inset-0 z-[2147483647] flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm animate-pulse-soft",onClick:t}),r.jsxs("div",{className:"relative w-full max-w-lg bg-surface-900/95 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl animate-scale-in overflow-hidden flex flex-col max-h-[80vh]",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-gradient-to-r from-primary-500/10 to-accent-500/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-accent-600 flex items-center justify-center shadow-lg shadow-primary-500/20",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Summary"}),r.jsx("p",{className:"text-xs text-white/50",children:"Key points from selection"})]})]}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg text-white/40 hover:text-white hover:bg-white/10 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[r.jsx("p",{className:"text-white/90 leading-relaxed text-base font-medium",children:o}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex justify-between items-center text-xs text-white/40 font-mono",children:[r.jsxs("span",{children:["Original: ",e.length," chars"]}),r.jsxs("span",{children:["Summary: ",o.length," chars (",Math.round(o.length/e.length*100),"%)"]})]})]}),r.jsxs("div",{className:"p-4 bg-surface-800/50 border-t border-white/5 flex gap-3",children:[r.jsx("button",{onClick:c,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-surface-700/50 hover:bg-surface-700 text-white font-medium transition-all hover:scale-[1.02]",children:a?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("span",{className:"text-green-400",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 text-white/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),r.jsx("span",{children:"Copy Text"})]})}),r.jsx("button",{onClick:p,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all hover:scale-[1.02] shadow-lg
              ${n?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-primary-500 hover:bg-primary-400 text-white shadow-primary-500/25"}`,children:n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-4 h-4 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),r.jsx("span",{children:"Stop"})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),r.jsx("span",{children:"Read Aloud"})]})})]})]})]})},ye="lexilens-typography-styles",T={fontFamily:"--lexilens-font-family",lineHeight:"--lexilens-line-height",letterSpacing:"--lexilens-letter-spacing",wordSpacing:"--lexilens-word-spacing",fontWeight:"--lexilens-font-weight"},vr={OpenDyslexic:'"OpenDyslexic", "Comic Sans MS", Arial, sans-serif',Arial:"Arial, Helvetica, sans-serif",Verdana:"Verdana, Geneva, sans-serif","Comic Sans MS":'"Comic Sans MS", "Comic Sans", cursive, sans-serif',"system-ui":'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'};function yr(e){return`
    :root {
      ${T.fontFamily}: ${vr[e.fontFamily]};
      ${T.lineHeight}: ${e.lineHeight};
      ${T.letterSpacing}: ${e.letterSpacing}px;
      ${T.wordSpacing}: ${e.wordSpacing}px;
      ${T.fontWeight}: ${e.fontWeight};
    }

    /* Apply to all text elements with high specificity */
    html body,
    html body *:not(script):not(style):not(svg):not(path):not(.lexilens-widget):not(.lexilens-widget *) {
      font-family: var(${T.fontFamily}) !important;
      line-height: var(${T.lineHeight}) !important;
      letter-spacing: var(${T.letterSpacing}) !important;
      word-spacing: var(${T.wordSpacing}) !important;
      font-weight: var(${T.fontWeight}) !important;
    }

    /* Preserve icons and special fonts */
    html body [class*="icon"],
    html body [class*="Icon"],
    html body i[class*="fa"],
    html body .material-icons,
    html body svg,
    html body code,
    html body pre,
    html body kbd,
    html body samp {
      font-family: inherit !important;
      letter-spacing: normal !important;
      word-spacing: normal !important;
    }
  `}function kr(e){let t=document.getElementById(ye);t||(t=document.createElement("style"),t.id=ye,t.setAttribute("data-lexilens","typography"),document.head.appendChild(t)),t.textContent=yr(e)}function ze(){const e=document.getElementById(ye);e&&e.remove()}const jr="lexilens-reading-ruler";let w=null,De=0,P=null,Ne=!1;function Cr(e){const t=document.createElement("div");return t.id=jr,t.setAttribute("data-lexilens","reading-ruler"),Object.assign(t.style,{position:"fixed",left:"0",right:"0",height:`${e.height}px`,backgroundColor:e.color,opacity:String(e.opacity),pointerEvents:"none",zIndex:"2147483646",transform:"translateY(-50%)",transition:"top 0.05s ease-out, opacity 0.2s ease",boxShadow:"0 0 30px rgba(0, 0, 0, 0.1)",top:"-100px"}),t}function qe(e){De=e.clientY,P&&cancelAnimationFrame(P),P=requestAnimationFrame(()=>{w&&(w.style.top=`${De}px`)})}function Je(){w&&(w.style.opacity="0")}function Ke(){if(w&&Ne){const e=w.dataset.opacity;w.style.opacity=e||"0.4"}}function Ze(e){if(w){Qe(e);return}Ne=!0,w=Cr(e),w.dataset.opacity=String(e.opacity),document.body.appendChild(w),document.addEventListener("mousemove",qe,{passive:!0}),document.addEventListener("mouseleave",Je),document.addEventListener("mouseenter",Ke),requestAnimationFrame(()=>{w&&(w.style.opacity=String(e.opacity))})}function Qe(e){if(!w){e.enabled&&Ze(e);return}w.style.height=`${e.height}px`,w.style.backgroundColor=e.color,w.style.opacity=String(e.opacity),w.dataset.opacity=String(e.opacity)}function he(){Ne=!1,P&&(cancelAnimationFrame(P),P=null),document.removeEventListener("mousemove",qe),document.removeEventListener("mouseleave",Je),document.removeEventListener("mouseenter",Ke),w&&(w.style.opacity="0",setTimeout(()=>{w==null||w.remove(),w=null},200))}const se="lexilens-screen-tint",Sr={none:"transparent",sepia:"#f5e6d3","blue-light":"#ffedd5",custom:""};function et(e){return e.preset==="custom"?e.customColor:Sr[e.preset]}function Er(e){const t=document.createElement("div");t.id=se,t.setAttribute("data-lexilens","screen-tint");const o=et(e);return Object.assign(t.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:o,opacity:String(e.intensity/100),pointerEvents:"none",zIndex:"2147483645",mixBlendMode:"multiply",transition:"opacity 0.3s ease, background-color 0.3s ease"}),t}function tt(e){let t=document.getElementById(se);if(t){rt(e);return}t=Er(e),document.body.appendChild(t)}function rt(e){const t=document.getElementById(se);if(!t){e.enabled&&e.preset!=="none"&&tt(e);return}const o=et(e);t.style.backgroundColor=o,t.style.opacity=String(e.intensity/100)}function ge(){const e=document.getElementById(se);e&&(e.style.opacity="0",setTimeout(()=>{e.remove()},300))}const oe="lexilens-focus-mode-styles",V="lexilens-focused",Y="lexilens-dimmed";let ke=!1,D=null,B=null;const ot=["p","article","section","blockquote","li",".paragraph",'[role="article"]',"h1","h2","h3","h4","h5","h6"].join(", ");function at(e){return`
    /* Focus mode dimming */
    .${Y} {
      opacity: ${1-e} !important;
      transition: opacity 0.2s ease !important;
    }
    
    .${V} {
      opacity: 1 !important;
      transition: opacity 0.2s ease !important;
      position: relative;
      z-index: 1;
    }
    
    /* Ensure the focused element stands out */
    .${V}::before {
      content: '';
      position: absolute;
      top: -8px;
      left: -12px;
      right: -12px;
      bottom: -8px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      pointer-events: none;
      z-index: -1;
    }
  `}function Nr(e){return e.closest(ot)}function nt(e){B&&window.clearTimeout(B),B=window.setTimeout(()=>{const t=e.target;if(!t)return;const o=Nr(t);o!==D&&(D&&(D.classList.remove(V),D.classList.add(Y)),o?(o.classList.remove(Y),o.classList.add(V),D=o):D=null)},50)}function Lr(){document.querySelectorAll(ot).forEach(t=>{t.closest(".lexilens-widget")||t.classList.add(Y)})}function Tr(){const e=document.querySelectorAll(`.${Y}`),t=document.querySelectorAll(`.${V}`);e.forEach(o=>o.classList.remove(Y)),t.forEach(o=>o.classList.remove(V))}function Rr(e){if(ke){it(e);return}ke=!0;let t=document.getElementById(oe);t||(t=document.createElement("style"),t.id=oe,t.setAttribute("data-lexilens","focus-mode"),document.head.appendChild(t)),t.textContent=at(e.dimOpacity),Lr(),document.addEventListener("mousemove",nt,{passive:!0})}function it(e){const t=document.getElementById(oe);t&&(t.textContent=at(e.dimOpacity))}function fe(){ke=!1,B&&(window.clearTimeout(B),B=null),document.removeEventListener("mousemove",nt),Tr(),D=null;const e=document.getElementById(oe);e&&e.remove()}const je="lexilens-bionic-processed";let R=null,W=!1;function Ar(e,t){const o=e.length;if(o<1)return e;if(o===1)return`<b>${e}</b>`;let a=Math.ceil(o*(t/100));return a<1&&(a=1),o>10&&(a=Math.max(1,Math.floor(o*(t/100)))),`<b>${e.slice(0,a)}</b>${e.slice(a)}`}function Mr(e){R&&(cancelAnimationFrame(R),R=null);const t=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,{acceptNode:n=>{var p;const s=n.parentElement;if(!s)return NodeFilter.FILTER_REJECT;const c=s.tagName;return["SCRIPT","STYLE","NOSCRIPT","TEXTAREA","INPUT","CODE","PRE","SVG","IMG","CANVAS","VIDEO","AUDIO"].includes(c)||s.isContentEditable||s.closest("[data-lexilens]")||s.closest(".lexilens-widget")||s.closest("#lexilens-root")||s.classList.contains(je)||!((p=n.nodeValue)!=null&&p.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),o=[];for(;t.nextNode();)o.push(t.currentNode);console.log(`[LexiLens] Bionic Reading: Found ${o.length} text nodes`);let a=0;const i=()=>{if(!W){R=null;return}const n=performance.now();for(;a<o.length&&performance.now()-n<10;){const s=o[a++];if(!s.isConnected)continue;const p=(s.nodeValue||"").split(/(\s+)/),d=document.createDocumentFragment();let m=!1;p.forEach(u=>{if(!u.trim()){d.appendChild(document.createTextNode(u));return}if(/[a-zA-Z]/.test(u)){m=!0;const f=document.createElement("span");f.className=je,f.innerHTML=Ar(u,e),d.appendChild(f)}else d.appendChild(document.createTextNode(u))}),m&&s.parentNode&&s.replaceWith(d)}a<o.length&&W?R=requestAnimationFrame(i):(R=null,console.log("[LexiLens] Bionic Reading: Processing complete"))};R=requestAnimationFrame(i)}function Fr(){R&&(cancelAnimationFrame(R),R=null);const e=document.querySelectorAll(`.${je}`),t=new Set;e.forEach(o=>{o.parentElement&&t.add(o.parentElement);const a=o.textContent||"";o.replaceWith(document.createTextNode(a))}),t.forEach(o=>{try{o.normalize()}catch{}})}function Ir(e){W||(W=!0,console.log(`[LexiLens] Enabling Bionic Reading (${e.boldPercentage}% bold)`),setTimeout(()=>{W&&Mr(e.boldPercentage)},100))}function we(){console.log("[LexiLens] Disabling Bionic Reading"),W=!1,Fr()}const ae="data-lexilens-syllable",G="data-lexilens-syllable-original";let Ce=!1;const zr="aeiouyAEIOUY";function F(e){return zr.includes(e)}function Dr(e){if(e.length<=3)return[e];const t=[];let o="",a=0;for(;a<e.length;){const i=e[a];if(o+=i,a<e.length-2){const n=e[a+1],s=e[a+2];F(i)&&!F(n)&&F(s)?(t.push(o),o=""):(F(i)&&!F(n)&&!F(s)&&n===s||F(i)&&!F(n)&&!F(s)&&n!==s)&&(o+=n,t.push(o),o="",a++)}a++}return o&&(t.length>0&&o.length<=2&&!o.match(/[aeiouy]/i)?t[t.length-1]+=o:t.push(o)),t.filter(i=>i.length>0)}function $r(e,t){const o=e.textContent||"",a=document.createDocumentFragment(),i=/([a-zA-Z']+)|([^a-zA-Z']+)/g;let n;for(;(n=i.exec(o))!==null;){const s=n[1],c=n[2];if(s&&s.length>3){const p=Dr(s),d=document.createElement("span");d.setAttribute("data-lexilens-syllables",p.join(t)),d.textContent=p.join(t),d.style.letterSpacing="0.5px",a.appendChild(d)}else s?a.appendChild(document.createTextNode(s)):c&&a.appendChild(document.createTextNode(c))}return a}function st(e){return!!(["SCRIPT","STYLE","NOSCRIPT","IFRAME","OBJECT","EMBED","SVG","CANVAS","CODE","PRE","KBD","INPUT","TEXTAREA"].includes(e.tagName)||e.hasAttribute(ae)||e.hasAttribute("data-lexilens-syllables")||e.closest(".lexilens-widget")||e.getAttribute("contenteditable")==="true")}function $e(e,t){const o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:n=>{var c;const s=n.parentElement;return!s||st(s)||!((c=n.textContent)!=null&&c.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),a=[];let i;for(;i=o.nextNode();)a.push(i);for(let n=a.length-1;n>=0;n--){const s=a[n],c=s.parentElement;if(!c||c.hasAttribute(ae))continue;c.hasAttribute(G)||c.setAttribute(G,c.innerHTML);const p=$r(s,t);s.replaceWith(p),c.setAttribute(ae,"true")}}function _r(e){if(Ce)return;Ce=!0,$e(document.body,e.separator);let t=null;const o=new MutationObserver(a=>{const i=[];for(const n of a)for(const s of n.addedNodes)if(s.nodeType===Node.ELEMENT_NODE){const c=s;st(c)||i.push(c)}i.length!==0&&(t&&window.clearTimeout(t),t=window.setTimeout(()=>{o.disconnect();try{i.forEach(n=>$e(n,e.separator))}finally{o.observe(document.body,{childList:!0,subtree:!0}),t=null}},100))});o.observe(document.body,{childList:!0,subtree:!0}),window.__lexilensSyllableObserver=o}function be(){Ce=!1;const e=window.__lexilensSyllableObserver;e&&(e.disconnect(),delete window.__lexilensSyllableObserver),document.querySelectorAll(`[${G}]`).forEach(o=>{const a=o.getAttribute(G);a&&(o.innerHTML=a),o.removeAttribute(ae),o.removeAttribute(G)})}let k=null,me=!1,q=!1,te=null;const Or="lexilens-hand-overlay",Pr="LEXILENS_HAND_DATA",Br="LEXILENS_HAND_CMD",Wr="LEXILENS_HAND_ACK";function Hr(e){if(e.data.type===Pr&&k){const{x:t,y:o,detected:a}=e.data.payload;a&&typeof t=="number"&&typeof o=="number"?(k.style.setProperty("--hand-x",`${t}px`),k.style.setProperty("--hand-y",`${o}px`),k.style.opacity="1"):k.style.opacity="0.3"}else if(e.data.type===Wr)if(console.log("[LexiLens Content] Driver status:",e.data.status),e.data.status==="DRIVER_LOADED"){if(q){const t=chrome.runtime.getURL("mediapipe/");J("START",{baseUrl:t}),Z()}}else e.data.status==="STARTED"?Z():e.data.status==="ERROR"&&console.error("[LexiLens Content] Driver error:",e.data.message)}function J(e,t){window.postMessage({type:Br,command:e,value:t},"*")}function Z(){te&&(clearInterval(te),te=null)}function Vr(){if(me)return;const e="lexilens-mediapipe-script";if(document.getElementById(e)){me=!0;return}const t=document.createElement("script");t.id=e,t.src=chrome.runtime.getURL("mediapipe/hands.js"),document.head.appendChild(t),t.onload=()=>{console.log("[LexiLens Content] MediaPipe lib loaded");const o=document.createElement("script");o.src=chrome.runtime.getURL("hand-driver.js"),document.head.appendChild(o)},t.onerror=o=>{console.error("[LexiLens Content] Failed to load MediaPipe library",o)},window.addEventListener("message",Hr),me=!0}function Yr(e){const t=document.createElement("div");t.id=Or,t.setAttribute("data-lexilens","hand-overlay");const o=window.innerWidth/2,a=window.innerHeight/2;return t.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 2147483645;
    pointer-events: none;
    backdrop-filter: blur(${e.blurAmount||6}px);
    -webkit-backdrop-filter: blur(${e.blurAmount||6}px);
    --hand-x: ${o}px;
    --hand-y: ${a}px;
    --spotlight-radius: ${e.spotlightRadius}px;
    --feather: 60px;
    mask-image: radial-gradient(
      circle at var(--hand-x) var(--hand-y),
      transparent 0px,
      transparent var(--spotlight-radius),
      rgba(0,0,0,0.5) calc(var(--spotlight-radius) + var(--feather)),
      rgba(0,0,0,1) calc(var(--spotlight-radius) + var(--feather) + 80px)
    );
    -webkit-mask-image: radial-gradient(
      circle at var(--hand-x) var(--hand-y),
      transparent 0px,
      transparent var(--spotlight-radius),
      rgba(0,0,0,0.5) calc(var(--spotlight-radius) + var(--feather)),
      rgba(0,0,0,1) calc(var(--spotlight-radius) + var(--feather) + 80px)
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  `,t}function Ur(e){if(q)return;console.log("[LexiLens Content] Enabling Hand Focus"),q=!0,Vr(),k?k.style.display="block":(k=Yr(e),document.documentElement.appendChild(k)),lt(e);const t=chrome.runtime.getURL("mediapipe/");J("START",{baseUrl:t}),Z(),te=window.setInterval(()=>{if(!q){Z();return}console.log("[LexiLens Content] Pinging driver..."),J("PING"),J("START",{baseUrl:t})},1e3)}function lt(e){k&&(k.style.setProperty("--spotlight-radius",`${e.spotlightRadius}px`),e.blurAmount&&(k.style.backdropFilter=`blur(${e.blurAmount}px)`,k.style.webkitBackdropFilter=`blur(${e.blurAmount}px)`))}function Xr(){console.log("[LexiLens Content] Disabling Hand Focus"),q=!1,Z(),k&&(k.style.display="none"),J("STOP")}const Gr=()=>{const{settings:e,isLoading:t,initialize:o}=$(),[a,i]=g.useState(!1),[n,s]=g.useState(null);return g.useEffect(()=>{o()},[o]),g.useEffect(()=>{if(!t){if(!e.enabled){ze(),he(),ge(),fe(),we(),be(),pe();return}kr(e.typography),e.visualAids.readingRuler.enabled?Ze(e.visualAids.readingRuler):he(),e.visualAids.screenTint.enabled&&e.visualAids.screenTint.preset!=="none"?tt(e.visualAids.screenTint):ge(),e.visualAids.focusMode.enabled?Rr(e.visualAids.focusMode):fe(),e.cognitive.bionicReading.enabled?Ir(e.cognitive.bionicReading):we(),e.cognitive.syllableSplitter.enabled?_r(e.cognitive.syllableSplitter):be(),e.visualAids.irisFocus.enabled?or(e.visualAids.irisFocus):Ie(),e.visualAids.handFocus.enabled?Ur(e.visualAids.handFocus):Xr(),e.audio.clickToRead?pr(e.audio):pe()}},[e,t]),g.useEffect(()=>{t||!e.enabled||Qe(e.visualAids.readingRuler)},[e.visualAids.readingRuler,t,e.enabled]),g.useEffect(()=>{t||!e.enabled||rt(e.visualAids.screenTint)},[e.visualAids.screenTint,t,e.enabled]),g.useEffect(()=>{t||!e.enabled||it(e.visualAids.focusMode)},[e.visualAids.focusMode,t,e.enabled]),g.useEffect(()=>{t||!e.enabled||Ue(e.visualAids.irisFocus)},[e.visualAids.irisFocus,t,e.enabled]),g.useEffect(()=>{t||!e.enabled||lt(e.visualAids.handFocus)},[e.visualAids.handFocus,t,e.enabled]),g.useEffect(()=>{const c=p=>{p.type==="SUMMARIZE_TEXT"&&typeof p.payload=="string"&&(s(p.payload),i(!1))};return chrome.runtime.onMessage.addListener(c),()=>chrome.runtime.onMessage.removeListener(c)},[]),g.useEffect(()=>()=>{ze(),he(),ge(),fe(),we(),be(),Ie(),pe()},[]),t?null:r.jsxs("div",{className:"fixed bottom-6 right-6 z-[2147483647] flex flex-col items-end gap-4 font-sans",children:[a&&r.jsx("div",{className:"animate-slide-up",children:r.jsx(fr,{onClose:()=>i(!1)})}),n&&r.jsx(xr,{originalText:n,onClose:()=>s(null)}),r.jsx(wr,{onClick:()=>i(!a),isOpen:a})]})},qr=`*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:OpenDyslexic,Comic Sans MS,Arial,sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.lexilens-scrollbar::-webkit-scrollbar{width:6px}.lexilens-scrollbar::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.lexilens-scrollbar::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.lexilens-scrollbar::-webkit-scrollbar-thumb:hover{background:#ffffff80}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-right-1{right:-.25rem}.-top-1{top:-.25rem}.bottom-6{bottom:1.5rem}.right-0{right:0}.right-6{right:1.5rem}.right-8{right:2rem}.right-full{right:100%}.top-1\\/2{top:50%}.top-8{top:2rem}.top-full{top:100%}.isolate{isolation:isolate}.z-50{z-index:50}.z-\\[2147483647\\]{z-index:2147483647}.z-\\[2147483648\\]{z-index:2147483648}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mr-3{margin-right:.75rem}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-\\[120px\\]{height:120px}.h-full{height:100%}.max-h-\\[550px\\]{max-height:550px}.max-h-\\[80vh\\]{max-height:80vh}.w-1\\.5{width:.375rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-3{width:.75rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-\\[340px\\]{width:340px}.w-full{width:100%}.min-w-\\[220px\\]{min-width:220px}.max-w-lg{max-width:32rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0\\.5{--tw-translate-x: .125rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes ping{75%,to{transform:scale(2);opacity:0}}.animate-ping{animation:ping 1s cubic-bezier(0,0,.2,1) infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulseSoft{0%,to{opacity:1}50%{opacity:.7}}.animate-pulse-soft{animation:pulseSoft 2s ease-in-out infinite}@keyframes scaleIn{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.animate-scale-in{animation:scaleIn .2s ease-out}@keyframes slideUp{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}.animate-slide-up{animation:slideUp .3s ease-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-crosshair{cursor:crosshair}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0\\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-8{border-width:8px}.border-b{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.border-accent-600\\/30{border-color:#c026d34d}.border-primary-500{--tw-border-opacity: 1;border-color:rgb(14 165 233 / var(--tw-border-opacity, 1))}.border-primary-500\\/20{border-color:#0ea5e933}.border-primary-500\\/30{border-color:#0ea5e94d}.border-red-500\\/30{border-color:#ef44444d}.border-surface-900{--tw-border-opacity: 1;border-color:rgb(24 24 27 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\\/10{border-color:#ffffff1a}.border-white\\/20{border-color:#fff3}.border-white\\/5{border-color:#ffffff0d}.border-l-surface-800{--tw-border-opacity: 1;border-left-color:rgb(39 39 42 / var(--tw-border-opacity, 1))}.border-t-transparent{border-top-color:transparent}.bg-accent-600\\/20{background-color:#c026d333}.bg-black\\/40{background-color:#0006}.bg-black\\/90{background-color:#000000e6}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-500\\/20{background-color:#22c55e33}.bg-primary-400{--tw-bg-opacity: 1;background-color:rgb(56 189 248 / var(--tw-bg-opacity, 1))}.bg-primary-500{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.bg-primary-500\\/10{background-color:#0ea5e91a}.bg-primary-500\\/20{background-color:#0ea5e933}.bg-primary-600{--tw-bg-opacity: 1;background-color:rgb(2 132 199 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\\/20{background-color:#ef444433}.bg-surface-600{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.bg-surface-700{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.bg-surface-700\\/50{background-color:#3f3f4680}.bg-surface-700\\/80{background-color:#3f3f46cc}.bg-surface-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.bg-surface-800\\/30{background-color:#27272a4d}.bg-surface-800\\/50{background-color:#27272a80}.bg-surface-900{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.bg-surface-900\\/30{background-color:#18181b4d}.bg-surface-900\\/95{background-color:#18181bf2}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/10{background-color:#ffffff1a}.bg-white\\/30{background-color:#ffffff4d}.bg-\\[url\\(\\'data\\:image\\/svg\\+xml\\;charset\\=US-ASCII\\,\\%3Csvg\\%20xmlns\\%3D\\%22http\\%3A\\%2F\\%2Fwww\\.w3\\.org\\%2F2000\\%2Fsvg\\%22\\%20width\\%3D\\%22292\\.4\\%22\\%20height\\%3D\\%22292\\.4\\%22\\%3E\\%3Cpath\\%20fill\\%3D\\%22\\%23ffffff\\%22\\%20d\\%3D\\%22M287\\%2069\\.4a17\\.6\\%2017\\.6\\%200\\%200\\%200-13-5\\.4H18\\.4c-5\\%200-9\\.3\\%201\\.8-12\\.9\\%205\\.4A17\\.6\\%2017\\.6\\%200\\%200\\%200\\%200\\%2082\\.2c0\\%205\\%201\\.8\\%209\\.3\\%205\\.4\\%2012\\.9l128\\%20127\\.9c3\\.6\\%203\\.6\\%207\\.8\\%205\\.4\\%2012\\.8\\%205\\.4s9\\.2-1\\.8\\%2012\\.8-5\\.4L287\\%2095c3\\.5-3\\.5\\%205\\.4-7\\.8\\%205\\.4-12\\.8\\%200-5-1\\.9-9\\.2-5\\.5-12\\.8z\\%22\\%2F\\%3E\\%3C\\%2Fsvg\\%3E\\'\\)\\]{background-image:url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E)}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-primary-400{--tw-gradient-from: #38bdf8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(56 189 248 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary-500{--tw-gradient-from: #0ea5e9 var(--tw-gradient-from-position);--tw-gradient-to: rgb(14 165 233 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary-500\\/10{--tw-gradient-from: rgb(14 165 233 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(14 165 233 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-accent-500{--tw-gradient-to: #d946ef var(--tw-gradient-to-position)}.to-accent-500\\/10{--tw-gradient-to: rgb(217 70 239 / .1) var(--tw-gradient-to-position)}.to-accent-600{--tw-gradient-to: #c026d3 var(--tw-gradient-to-position)}.bg-\\[length\\:8px\\]{background-size:8px}.bg-\\[center_right_12px\\]{background-position:center right 12px}.bg-no-repeat{background-repeat:no-repeat}.p-0{padding:0}.p-1\\.5{padding:.375rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-4{padding-bottom:1rem}.pl-2{padding-left:.5rem}.pt-0{padding-top:0}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:OpenDyslexic,Comic Sans MS,Arial,sans-serif}.text-2xl{font-size:1.5rem;line-height:2rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-relaxed{line-height:1.625}.tracking-tight{letter-spacing:-.025em}.text-accent-400{--tw-text-opacity: 1;color:rgb(232 121 249 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-primary-300{--tw-text-opacity: 1;color:rgb(125 211 252 / var(--tw-text-opacity, 1))}.text-primary-400{--tw-text-opacity: 1;color:rgb(56 189 248 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\\/30{color:#ffffff4d}.text-white\\/40{color:#fff6}.text-white\\/50{color:#ffffff80}.text-white\\/60{color:#fff9}.text-white\\/70{color:#ffffffb3}.text-white\\/90{color:#ffffffe6}.placeholder-white\\/30::-moz-placeholder{color:#ffffff4d}.placeholder-white\\/30::placeholder{color:#ffffff4d}.opacity-0{opacity:0}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-75{opacity:.75}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-glow{--tw-shadow: 0 0 20px rgba(14, 165, 233, .3);--tw-shadow-colored: 0 0 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-primary-500\\/20{--tw-shadow-color: rgb(14 165 233 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary-500\\/25{--tw-shadow-color: rgb(14 165 233 / .25);--tw-shadow: var(--tw-shadow-colored)}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-primary-500\\/50{--tw-ring-color: rgb(14 165 233 / .5)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.sepia{--tw-sepia: sepia(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-xl{--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.glass{background:#1e1e28d9;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1)}@font-face{font-family:OpenDyslexic;src:url(https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/woff2/OpenDyslexic-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:OpenDyslexic;src:url(https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/woff2/OpenDyslexic-Bold.woff2) format("woff2");font-weight:700;font-style:normal;font-display:swap}html,body{font-family:OpenDyslexic,Comic Sans MS,Arial,sans-serif!important}*{font-family:inherit}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;cursor:pointer;border:2px solid rgba(0,0,0,.3);box-shadow:0 2px 4px #0000004d}input[type=range]::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:#fff;cursor:pointer;border:2px solid rgba(0,0,0,.3);box-shadow:0 2px 4px #0000004d}input[type=color]{-webkit-appearance:none;padding:0;border:none;border-radius:6px;cursor:pointer}input[type=color]::-webkit-color-swatch-wrapper{padding:0;border-radius:6px}input[type=color]::-webkit-color-swatch{border:2px solid rgba(255,255,255,.2);border-radius:6px}.hover\\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.02\\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:bg-accent-600\\/30:hover{background-color:#c026d34d}.hover\\:bg-green-500\\/30:hover{background-color:#22c55e4d}.hover\\:bg-primary-400:hover{--tw-bg-opacity: 1;background-color:rgb(56 189 248 / var(--tw-bg-opacity, 1))}.hover\\:bg-primary-500:hover{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.hover\\:bg-primary-500\\/30:hover{background-color:#0ea5e94d}.hover\\:bg-red-500\\/30:hover{background-color:#ef44444d}.hover\\:bg-surface-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.hover\\:bg-surface-700:hover{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.hover\\:bg-surface-700\\/50:hover{background-color:#3f3f4680}.hover\\:bg-surface-800\\/50:hover{background-color:#27272a80}.hover\\:bg-white\\/10:hover{background-color:#ffffff1a}.hover\\:bg-white\\/5:hover{background-color:#ffffff0d}.hover\\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\\:text-white\\/60:hover{color:#fff9}.hover\\:text-white\\/80:hover{color:#fffc}.hover\\:shadow-glow-lg:hover{--tw-shadow: 0 0 40px rgba(14, 165, 233, .4);--tw-shadow-colored: 0 0 40px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\\:border-primary-500:focus{--tw-border-opacity: 1;border-color:rgb(14 165 233 / var(--tw-border-opacity, 1))}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-primary-500\\/30:focus{--tw-ring-color: rgb(14 165 233 / .3)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.group:hover .group-hover\\:opacity-100{opacity:1}.group:active .group-active\\:opacity-20{opacity:.2}@media (min-width: 640px){.sm\\:inline{display:inline}}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:h-4::-webkit-slider-thumb{height:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:w-4::-webkit-slider-thumb{width:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:cursor-pointer::-webkit-slider-thumb{cursor:pointer}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:appearance-none::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:rounded-full::-webkit-slider-thumb{border-radius:9999px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:bg-primary-500::-webkit-slider-thumb{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:shadow-lg::-webkit-slider-thumb{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:shadow-primary-500\\/30::-webkit-slider-thumb{--tw-shadow-color: rgb(14 165 233 / .3);--tw-shadow: var(--tw-shadow-colored)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:transition-transform::-webkit-slider-thumb{-webkit-transition-property:transform;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:hover\\:scale-110:hover::-webkit-slider-thumb{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}`,_e="lexilens-root";let K=null,A=null;function Oe(){if(document.getElementById(_e)){console.log("[LexiLens] Already initialized");return}if(window.location.protocol==="chrome-extension:"||window.location.protocol==="chrome:"||window.location.protocol==="moz-extension:"||window.location.protocol==="about:"||window.location.hostname==="newtab"){console.log("[LexiLens] Skipping extension/special page");return}A=document.createElement("div"),A.id=_e,A.className="lexilens-widget",A.setAttribute("data-lexilens","root"),Object.assign(A.style,{position:"fixed",top:"0",left:"0",width:"0",height:"0",overflow:"visible",zIndex:"2147483647",pointerEvents:"none"});const e=A.attachShadow({mode:"closed"}),t=document.createElement("style");t.textContent=qr,e.appendChild(t);const o=document.createElement("style");o.textContent=`
    :host {
      all: initial;
    }
    
    .widget-container {
      pointer-events: auto;
      font-family: 'OpenDyslexic', 'Comic Sans MS', Arial, sans-serif;
    }
    
    * {
      box-sizing: border-box;
      font-family: inherit;
    }
  `,e.appendChild(o);const a=document.createElement("div");a.className="widget-container",e.appendChild(a),document.body.appendChild(A),K=mt(a),K.render(r.jsx(Pe.StrictMode,{children:r.jsx(Gr,{})})),console.log("[LexiLens] Initialized successfully")}function Jr(){K&&(K.unmount(),K=null),A&&(A.remove(),A=null)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Oe):Oe();window.addEventListener("pagehide",Jr);
